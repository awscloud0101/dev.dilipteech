@model List<AsteriskBrowserAL.Models.StudentDetailsData>
    @{
    }


    <div class="row">
        <div class="col-xs-12">

            @if (null != Model && Model.Count() > 0)
            {
            <div class="">
                @*<div class="box-header">
                    <input type="button" class="btn btn-primary pull-right" value="Export Excel" id="btnExport" />
                </div>*@<!-- /.box-header -->

                <div class="table-header">
                    Records Found (@Model.Count())
                    <div style="float:right;margin-right:10px;">

                        <button class="btncustom" id="btnExport">
                            Download

                        </button>

                    </div>
                </div>
                <div class="widget-box  no-padding">
                    <div class="">
                        <table id="StudentStrengthReportdata" class="table tbhover table-striped table-bordered dynamic-table" style="font-size:14px;">
                            
                                <thead>
                                <tr>
                                    <th>
                                        @Html.DisplayName("Class")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Section")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Boys")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Girls")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Strength")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Total")
                                    </th>

                                </tr>

                                @{
                var students = Model.GroupBy(m => m.CourseName);
                                }
                                
                                </thead>
                <tbody>
                                @foreach (var classItem in students)
                                {
                                    var GroupBySections = classItem.GroupBy(s => s.Section).ToList();
                                    int n = 0;

                                    <tr>
                                        <td rowspan="@GroupBySections.Count()">@classItem.Key </td>
                                        @foreach (var se in GroupBySections)
                                        {
                                            if (n != 0)
                                            {
                                                continue;
                                            }

                                            <td>
                                                @se.Key
                                            </td>
                                            <td>
                                                @se.Count(g => g.Gender == 1)
                                            </td>
                                            <td>
                                                @se.Count(g => g.Gender == 0)
                                            </td>
                                            <td>
                                                @se.Count()
                                            </td>
                                            n++;
                                        }

                                        @{
                                    n = 0;
                                        }

                                        <td rowspan="@GroupBySections.Count()">@classItem.Count() </td>
                                    </tr>

                                    foreach (var se in GroupBySections)
                                    {
                                        if (n > 0)
                                        {
                                            <tr>
                                                <td>
                                                    @se.Key
                                                </td>
                                                <td>
                                                    @se.Count(g => g.Gender == 1)
                                                </td>
                                                <td>
                                                    @se.Count(g => g.Gender == 0)
                                                </td>
                                                <td>
                                                    @se.Count()
                                                </td>
                                            </tr>
                                        }
                                        n++;
                                    }
                                }


                            </tbody>
                           
                        </table>
                    </div>
                </div>
            </div>
            }
            else
            {
            <div style="color:red;font-weight:bold">Data not available to display</div>
            }
        </div>
    </div>

    @Html.Action("DataTableScripts", "Base",new {IsPaging = false,allowScroll = true })
    <script>

        function submitform() {
            $.ajax({
                url: '/AReports/StudentStrength',
                data: {},
                success: function (result) {
                }
            })
        };

        $('#btnExport').click(function () {
            ExportToExcel("StudentStrengthReportdata")
        });

        function isNumberKey(evt) {
            var charCode = (evt.which) ? evt.which : event.keyCode

            if (charCode == 46 || charCode == 65)
                return true;

            if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;

            return true;
        }
    </script>







