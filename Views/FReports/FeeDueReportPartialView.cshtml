@model PagedList.IPagedList<AsteriskBrowserAL.Models.FeeDueReportViewModel>
@using PagedList.Mvc;
@using AsteriskBrowserAL.Helpers
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{

    ViewBag.Title = "Fee Due Report";
    Layout = null;
}

<style>
    .MyClass td {
        padding: 10px 20px 0 0;
    }
    .Amount {
        text-align: right;
        min-width: 100Px;
        padding-right: -20px;
    }

    .blue2 {
        font-size: 13px;
        color: black;
        background: none;
        font-weight: bold;
    }

    .HeaderStyle {
        min-width: 140Px;
    }

    .AmountHeaderStyle {
        min-width: 110Px;
        text-align: center;
    }

    .tblTitle {
        position: absolute;
    }
</style>

@if (Model != null && Model.Count() > 0)
{
    int nsno = 1;
    <div class="table-header">
        Records Found (@Model.Count())
        <div style="float:right;margin-right:10px;">
            <button class="btncustom" >
                Download
            </button>
        </div>
    </div>
    <div class="overflowscroll" style="height:340px;overflow:auto;">
        <table class="table table-striped table-bordered dynamic-table">
            <thead>
                <tr>
                    <th style="text-align:center;min-width:200px; padding-right:2px" colspan="11">
                        @Html.DisplayName("Student Details")
                    </th>

                    <th style="text-align:center;min-width:200px" colspan="4">
                        @Html.DisplayName("Last Year Due")
                    </th>

                    <th style="text-align:center;min-width:200px" colspan="4">
                        @Html.DisplayName("Admission Fee")
                    </th>
                    <th style="text-align:center;min-width:200px" colspan="4">
                        @Html.DisplayName("Hostel Fee")
                    </th>
                    <th style="text-align:center;min-width:200px" colspan="17">
                        @Html.DisplayName("Tution Fee")
                    </th>

                    <th style="text-align:center;min-width:200px" colspan="13">
                        @Html.DisplayName("Transport Fee")
                    </th>

                    <th style="text-align:center;min-width:200px" colspan="2">
                        @Html.DisplayName("Percentage")
                    </th>

                    <th style="text-align:center;min-width:180px" colspan="1">
                        @Html.DisplayName("Grand Total Due")
                    </th>
                </tr>

                <tr>
                    <th style="text-align:center;min-width:60px">
                        S.No.
                    </th>
                    <th style="text-align:center;min-width:140px">
                        @Html.DisplayName("Division Name")
                    </th>
                    <th style="text-align:center;min-width:150px">
                        @Html.DisplayName("Branch Name")
                    </th>
                    <th class="HeaderStyle">
                        @Html.DisplayName("Admission No")
                    </th>
                    <th class="HeaderStyle">
                        @Html.DisplayName("Legacy Number")
                    </th>
                    <th class="HeaderStyle">
                        @Html.DisplayName("Student Name")
                    </th>
                    <th class="HeaderStyle">
                        @Html.DisplayName("Father Name")
                    </th>
                    <th class="HeaderStyle">
                        @Html.DisplayName("Mobile No")
                    </th>
                    <th style="text-align:center;min-width:120px">
                        @Html.DisplayName("Class")
                    </th>
                    <th style="min-width:80px">
                        @Html.DisplayName("Section")
                    </th>

                    <th style="min-width:86px">
                        @Html.DisplayName("Status")
                    </th>

                    @*<th style="min-width:70px">
                        @Html.DisplayName("Is Staff")
                    </th>*@

                    @*Old Due*@

                    <th class="HeaderStyle">
                        @Html.DisplayName("Actual Fee")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid Amount")
                    </th>

                    <th style="min-width:136Px">
                        @Html.DisplayName("Due Amount")
                    </th>


                    @*Admission Fee*@

                    <th style="min-width:136Px">
                        @Html.DisplayName("Actual Fee")
                    </th>
                    <th class="HeaderStyle">
                        @Html.DisplayName("Concession")
                    </th>
                    <th style="min-width:136Px">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:136Px">
                        @Html.DisplayName("Due Amount")
                    </th>
                    @*Hostel Fee*@
                    <th style="min-width:140Px">
                        @Html.DisplayName("Actual Fee")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Due Amount")
                    </th>


                    <th colspan="4" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Installment 1")
                    </th>

                    <th colspan="4" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Installment 2")
                    </th>

                    <th colspan="4" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Installment 3")
                    </th>


                    <th colspan="5" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Summary")
                    </th>


                    <th colspan="4" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Installment 1")
                    </th>

                    <th colspan="4" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Installment 2")
                    </th>
                    <th colspan="5" style="min-width:300px;text-align:center">
                        @Html.DisplayName("Summary")
                    </th>

                    <th colspan="2" style="min-width:80px;text-align:center">
                        @Html.DisplayName("")
                    </th>
                    <th colspan="1" style="min-width:80px;text-align:center">
                        @Html.DisplayName("")
                    </th>
                </tr>

                <tr>
                    <th colspan="23"></th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Actual Fee")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Due Amount")
                    </th>


                    <th style="min-width:140Px">
                        @Html.DisplayName("Actual Fee")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Due Amount")
                    </th>



                    <th style="min-width:140Px">
                        @Html.DisplayName("Actual Fee")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Due Amount")
                    </th>

                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("Fee")
                    </th>

                    <th style="text-align:center; min-width:135Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th style="text-align:center; min-width:135Px">
                        @Html.DisplayName("Net")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Due")
                    </th>


                    <th style="min-width:140Px">
                        @Html.DisplayName("Actual Fee")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Due Amount")
                    </th>


                    <th style="min-width:140Px">
                        @Html.DisplayName("Actual Fee")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Concession")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid Amount")
                    </th>
                    <th style="min-width:140Px">
                        @Html.DisplayName("Due Amount")
                    </th>


                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("Fee")
                    </th>

                    <th style="text-align:center; min-width:135Px">
                        @Html.DisplayName("Concession")
                    </th>

                    <th style="text-align:center; min-width:135Px">
                        @Html.DisplayName("Net")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Paid")
                    </th>

                    <th style="min-width:140Px">
                        @Html.DisplayName("Due")
                    </th>

                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("Paid %")
                    </th>
                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("Due %")
                    </th>

                    <th class="AmountHeaderStyle">
                        @Html.DisplayName("")
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td style="text-align:center;min-width:60Px">
                            @(nsno++)
                        </td>
                        <td style="min-width:140Px">
                            @item.DivisioName
                        </td>
                        <td>
                            @item.BranchName
                        </td>
                        <td>
                            @item.AdmissionNo
                        </td>
                        <td>
                            @item.LegacyNumber
                        </td>
                        <td>
                            @item.StudentDisplayName
                        </td>
                        <td>
                            @item.FatherName
                        </td>
                        <td>
                            @item.MobileNumber
                        </td>
                        <td>
                            @item.ClassNumberDisplay
                        </td>
                        <td>
                            @item.SectionName
                        </td>

                        <td>
                            @item.StudentStatus
                        </td>
                        @*<td>
                            @Html.DisplayName("")
                        </td>*@

                        <td class="Amount">
                            @item.ODAF
                        </td>

                        <td class="Amount">
                            @item.ODCA
                        </td>

                        <td class="Amount">
                            @item.ODPA
                        </td>
                        <td class="Amount">
                            @item.ODDA
                        </td>

                        <td class="Amount">
                            @item.AFAF
                        </td>
                        <td class="Amount">
                            @item.AFCA
                        </td>
                        <td class="Amount">
                            @item.AFPA
                        </td>
                        <td class="Amount">
                            @item.AFDA
                        </td>
                        <td class="Amount">
                            @item.HFAF
                        </td>
                        <td class="Amount">
                            @item.HFCA
                        </td>
                        <td class="Amount">
                            @item.HFPA
                        </td>
                        <td class="Amount">
                            @item.HFDA
                        </td>

                        <td class="Amount">
                            @item.T1IAF
                        </td>
                        <td class="Amount">
                            @item.T1ICA
                        </td>
                        <td class="Amount">
                            @item.T1IPA
                        </td>
                        <td class="Amount">
                            @item.T1IDA
                        </td>

                        <td class="Amount">
                            @item.T2IAF
                        </td>
                        <td class="Amount">
                            @item.T2ICA
                        </td>
                        <td class="Amount">
                            @item.T2IPA
                        </td>
                        <td class="Amount">
                            @item.T2IDA
                        </td>

                        <td class="Amount">
                            @item.T3IAF
                        </td>
                        <td class="Amount">
                            @item.T3ICA
                        </td>
                        <td class="Amount">
                            @item.T3IPA
                        </td>
                        <td class="Amount">
                            @item.T3IDA
                        </td>


                        <td class="Amount">
                            @item.TotalTutionFee
                        </td>
                        <td class="Amount">
                            @item.TotalTutionFeeConcession
                        </td>
                        <td class="Amount">
                            @item.TotalTutionFeeNetAmount
                        </td>
                        <td class="Amount">
                            @item.TotalTutionPaidAmount
                        </td>

                        <td class="Amount">
                            @item.TotalTutionDueAmount
                        </td>


                        <td class="Amount">
                            @item.TR1AF
                        </td>
                        <td class="Amount">
                            @item.TR1CA
                        </td>
                        <td class="Amount">
                            @item.TR1PA
                        </td>
                        <td class="Amount">
                            @item.TR1DA
                        </td>

                        <td class="Amount">
                            @item.TR2AF
                        </td>
                        <td class="Amount">
                            @item.TR2CA
                        </td>
                        <td class="Amount">
                            @item.TR2PA
                        </td>
                        <td class="Amount">
                            @item.TR2DA
                        </td>

                        <td class="Amount">
                            @item.TotalTransportFee
                        </td>
                        <td class="Amount">
                            @item.TotalTransportFeeConcession
                        </td>
                        <td class="Amount">
                            @item.TotalTransportNetAmount
                        </td>
                        <td class="Amount">
                            @item.TotalTransportPaidAmount
                        </td>
                        <td class="Amount">
                            @item.TotalTransportDueAmount
                        </td>

                        <td class="Amount">
                            @item.PaidPercentage
                        </td>
                        <td class="Amount">
                            @item.DuePercentage
                        </td>

                        <td style="text-align:right">
                            @item.DisplayTotalDueAmount
                        </td>
                    </tr>
                }

            </tbody>
        </table>

        <table class="table table-striped table-bordered">
            <tbody>
                <tr>
                    <td>
                        <h5 class="blue2">Total Last year Due</h5>
                    </td>
                    <td>
                        :
                    </td>

                    <td style="text-align:right">
                        <h5>@ViewBag.TotalOldDueAmount</h5>
                    </td>
                </tr>

                <tr>
                    <td>
                        <h5 class="blue2">Total Admission Fee Due </h5>
                    </td>
                    <td>
                        :
                    </td>

                    <td style="text-align:right">
                        <h5> @ViewBag.TotalAdmissionDueAmount </h5>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h5 class="blue2">Total Hostel Fee Due </h5>
                    </td>
                    <td>
                        :
                    </td>

                    <td style="text-align:right">
                        <h5> @ViewBag.TotalHostelDueAmount </h5>
                    </td>
                </tr>

                <tr>
                    <td>
                        <h5 class="blue2">Total Tution Fee Due</h5>
                    </td>
                    <td>
                        :
                    </td>
                    <td style="text-align:right">
                        <h5> @ViewBag.TotalTutionDueAmount </h5>
                    </td>
                </tr>


                <tr>
                    <td>
                        <h5 class="blue2">Total Transport Fee Due  </h5>
                    </td>
                    <td>
                        :
                    </td>
                    <td style="text-align:right">
                        <h5>@ViewBag.TotalTransportDueAmount  </h5>
                    </td>
                </tr>

                <tr>
                    <td>
                        <h5 class="blue2">Paid Percentage</h5>
                    </td>
                    <td>
                        :
                    </td>
                    <td style="text-align:right">
                        <h5>@ViewBag.PaidPercentage  </h5>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h5 class="blue2">Due Percentage</h5>
                    </td>
                    <td>
                        :
                    </td>
                    <td style="text-align:right">
                        <h5>@ViewBag.DuePercentage  </h5>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h5 class="blue2">Grand Total Due  </h5>
                    </td>
                    <td>
                        :
                    </td>
                    <td>
                        <h5 style="text-align:right">
                            @ViewBag.DisplayTotalDueAmount
                        </h5>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    @Html.Action("DataTableScripts", "Base")

}
else
{
    <br />
    <span style="color: red;"><b>Data is not available</b></span>
}
@*@Html.Action("DataTableScripts", "Base", new { IsPage = false, allowScroll = true, strHeight = "400px" })*@
<script>

    $('#myPager').on('click', 'a', function (e) {
        debugger
        e.preventDefault();
        $.ajax({
            url: this.href,
            type: 'GET',
            cache: false,
            success: function (result) {
                $('#TbFeeDueReport').html(result);
            }
        });
    });


    $('#search-btn').on('click', function (e) {
        debugger
        e.preventDefault();
        $.ajax({
            url: '/FReports/ReturnPartialViewWithPaging/',
            data: { page: 0, strSearch: $('#Search-txt').val() },
            type: 'GET',
            cache: false,
            success: function (result) {
                $('#TbFeeDueReport').html(result);
            }
        });
    });


    //$("#btnExport").click(function (e) {
    //    debugger
    //    var Data = $("#tbFeeDueReportData").html();
    //});
</script>
