@model AsteriskBrowserAL.Models.ItemModel

@if (null != Model)
{
    if (null != Model.lstItems && Model.lstItems.Count() > 0)
    {
        int nsno = 1;

        <div class="box box-primary">
            <div class="box-header">
                <h3 class="box-title">Items</h3>
                <button class="btn btn-primary pull-right" type="submit" onclick="return SubmitForm()" style="width:80px;">
                    Dispute
                </button>
            </div><!-- /.box-header -->
            <!-- form start -->
            <div class="box-body">
                <div class="box-body table-responsive no-padding" style="overflow:auto;height:400px;">
                    <div class="hideScrolling">
                        <table class="table tbhover table-striped table-bordered dynamic-table" style="font-size:14px;">
                            <thead>
                                <tr>
                                    <th>
                                       S.No.
                                    </th>
                                    <th>
                                        @Html.DisplayName("Item Name")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Received Date")
                                    </th>
                                    <th>
                                        @Html.DisplayName("Quantity")
                                    </th>

                                    @if (null != Model.lstDisputeType)
                                    {
                                        foreach (var type in Model.lstDisputeType)
                                        {
                                            <th>
                                                @type.Name
                                            </th>
                                        }
                                    }
                                </tr>
                            </thead>
                            <tbody>
                                @for (int i = 0; i < Model.lstItems.Count(); i++)
                                {
                                    <tr>
                                        @Html.Hidden("lstItems.Index", (@i))
                                        @Html.Hidden("lstItems[" + @i + "].InventoryTransferItemId", Model.lstItems.ElementAt(i).InventoryTransferItemId, new { id = "InventoryTransferItemId" })
                                        @Html.Hidden("lstItems[" + @i + "].InventoryTransferItemId", Model.lstItems.ElementAt(i).Quantity, new { id = "InventoryTransferItemId" })

                                        <td>
                                            @(nsno++)
                                        </td>
                                        <td>
                                            @Model.lstItems.ElementAt(i).ItemName
                                        </td>
                                        <td>
                                            @if (Model.lstItems.ElementAt(i).FirstInserted.HasValue)
                                            {
                                                @Model.lstItems.ElementAt(i).FirstInserted.Value.ToString("dd-MMM-yyyy")
                                            }
                                        </td>
                                        <td>
                                            @Model.lstItems.ElementAt(i).Quantity
                                        </td>
                                        @if (null != Model.lstDisputeType)
                                        {
                                            for (int j = 0; j < Model.lstDisputeType.Count(); j++)
                                            {
                                                @Html.Hidden("lstItems[" + @i + "].lstInventoryDispute[" + @j + "].DisputeTypeId", Model.lstDisputeType.ElementAt(j).DisputeTypeId, new { id = "DisputeTypeId" })

                                                <td>
                                                    @Html.TextBox("lstItems[" + @i + "].lstInventoryDispute[" + @j + "].DisputeQuantity", "", new { @class = "form-control textlength Quantity", onkeypress = "return isNumberKey(event)", @maxlength = "7", @min = "0", @max = "100000", @style = "width:120px" })
                                                </td>
                                            }
                                        }
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <span style="color: red;"><b>No items recieved</b></span>
    }
}
else
{
    <span style="color: red;"><b>No items recieved</b></span>
}


<script>
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
</script>

