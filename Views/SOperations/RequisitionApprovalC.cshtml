@model AsteriskBrowserAL.Models.StockEntryData

@if (Model != null)
{

    <div class="widget-box">
        <div class="widget-header">
            <h4 class="widget-title lighter smaller">
                Stock Entry History
            </h4>
            <div class="widget-toolbar no-border">
                <button type="submit" float="right" id="staffid" name="Save" value="Save" onclick="return Submitform();" class="btn btn-sm btn-success">
                    Send
                </button>
            </div>
        </div>
        <div class="widget-body" style="justify-content:flex-start;background:white;">
            <div class="widget-main no-padding">
                <div class="dialogs ace-scroll">
                    <div class="scroll-track scroll-active" style="display: block; height: 300px;"><div class="scroll-bar" style="height: 236px; top: 0px;"></div></div><div class="scroll-content" style="max-height: 300px;">
                        <div class="itemdiv dialogdiv">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <label class="col-sm-4 control-label no-padding-right" for="form-field-1">@Html.Label("Request Send To")</label>
                                        <div class="col-sm-6">
                                            <select id="RStaffid" name="RStaffid" class="form-control"></select>
                                        </div>
                                        <span class="col-sm-2" style="color:red" id="RStaffidVal"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <label class="col-sm-4 control-label no-padding-right" for="form-field-1">@Html.Label("Comments")</label>

                                        <div class="col-sm-6">
                                            @Html.TextBoxFor(model => model.Comments, new { @class = "form-control textlength", @id = "Comments", @maxlength = "35", placeholder = "Comments" })
                                        </div>
                                        <span class="col-sm-2" style="color:red" id="CommentsVal"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="requisitionid" name="nRequisitionid" value="@Model.RequisitionId" />
                    <input type="hidden" id="IsPrincipal" name="IsPrincipal" value="@Model.IsPrincipal.ToString()" />
                    <input type="hidden" id="IsHOD" name="IsHOD" value="@Model.IsHOD.ToString()" />
                    <input type="hidden" id="IsManager" name="IsManager" value="@Model.IsManager.ToString()" />
                    <input type="hidden" id="IsStaff" name="IsStaff" value="@Model.IsStaff.ToString()" />
                </div>
            </div><!-- /.widget-main -->
        </div><!-- /.widget-body -->
    </div>

}


<script>
    window.onload = onloadeddata();

    function onloadeddata() {
        LoadRStaff();
    }

    function LoadRStaff() {
        debugger
        var nIsPrincipal = $('#IsPrincipal').val();
        var nIsHOD = document.getElementById('IsHOD').value;
        var nIsManager = document.getElementById('IsManager').value;
        var nIsStaff = document.getElementById('IsStaff').value;
        $.ajax({
            url: '/SOperations/GetRStaff',
            data: { IsPrincipal: nIsPrincipal, IsHOD: nIsHOD, IsManager: nIsManager, IsStaff: nIsStaff },
            success: function (data) {
                var staffData = $('#RStaffid');
                staffData.append($("<option>").val("null").text("---select---"));

                $.each(data, function (i, record) {
                    staffData.append($("<option>").val(record.StaffId).text(record.DisplayName));
                });
                $('#RStaffid').append(staffData);
            },
            aync: false
        });
    }



    function Submitform() {
        var staffid = $('#RStaffid').val();
        var requistionid = $('#requisitionid').val();
        var Comments = $('#Comments').val();
        $.ajax({
            url: '/SOperations/RequisitionApprovalC',
            data: { nstaffid: staffid, nRequisitionId: requistionid, strcomments: Comments },
            type: 'Post',
            success: function (data) {
            },
            error: function () {
                $('#imagemodal').show();
            }

        }).done(function () {
            debugger
            $('#myModal').hide();
        });
    }

</script>
