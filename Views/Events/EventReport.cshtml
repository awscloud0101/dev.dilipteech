@model AsteriskBrowserAL.Models.EventsDetails
@{
    ViewBag.Title = "EventReport";
}


@section BreadCrumb{

    <ul class="breadcrumb">
        <li>
            <i class="menu-icon fa fa-list"></i>
            Academics
        </li>
        <li>
            <i class=""></i>
            Parent Teacher Meeting
        </li>
        <li class="active">Event Reports</li>
    </ul><!-- /.breadcrumb -->
}




@Html.Action("DatePickerScripts", "Base", new { IsPaging = false, AllowScroll = true })
<span id="Validation" style="color:red;font-weight:bold;"></span>
<section class="content">
@using (Html.BeginForm("ExportEventsReport", "Events", FormMethod.Post))
{
    <div class="row">
        <div class="col-xs-12">
            <div class="widget-box">
                <div class="widget-header widget-header-flat widget-header-small">
                    <h5 class="widget-title">
                       Event Report
                    </h5>
                </div>
                <div class="widget-body">
                    <div class="widget-main">
                        <div class="row">
                            <div class="col-sm-12">

                                <div class="col-xs-6">
                                    <label class="col-xs-4">Event Date</label>
                                    <div class="col-xs-6">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div id="datepicker" class="input-group date">
                                                    <input class="form-control" type="text" id="EventDate" name="EventDate" autocomplete="off" placeholder="Select Date" />
                                                    <span class="input-group-addon"><i class="ace-icon fa fa-calendar"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-6">
                                    <label class="col-xs-4">Class</label>
                                    <div class="col-xs-6">
                                        @Html.DropDownList("CourseId", null, "--Select--", new { @class = "form-control", @id = "CourseId" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <div id="PartialView"></div>
        </div>
    </div>
}
</section>

<script>

    $('#EventDate').change(function () {
        debugger
        Validation()
    })

    $('#CourseId').change(function () {
        debugger
        Validation()
    })

    function Validation() {
        var Message = "Select "
        var val = true;

        var EventDate = $('#EventDate').val()
        var CourseId = $('#CourseId').val()

        if (EventDate != "" && CourseId != "") {
            document.getElementById('Validation').innerHTML = ""
            $.ajax({
                url: '/Events/EventsPartial',
                data: { Date: EventDate, CourseId: CourseId },
                success: function (data) {
                    $('#PartialView').html(data)
                },
                aync: false
            });
        }
        else {

            if (EventDate == "") {
                Message += "Date,"
                val = false;
            }
            else if (CourseId == "") {
                Message += " Class,"
                val = false;
            }

            Message = Message.substring(',', Message.length - 1);
            document.getElementById('Validation').innerHTML = Message
        }
        return val;
    }

</script>