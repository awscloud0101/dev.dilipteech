@model AsteriskBrowserAL.Models.HdTicketsInfo


@if (null != Model)
{
    if (null != Model.MyTickets)
    {
        if (Model.MyTickets.Count() > 0)
        {
            int nSno = 1;
            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">My Tickets</h3>
                        </div><!-- /.box-header -->

                        <div class="box-body">
                            <div style="overflow:auto;height:250px;">
                                <table class="table table-hover">
                                    <tbody>
                                        <tr>
                                            <th>
                                               S.No.
                                            </th>
                                            <th>
                                                @Html.DisplayName("Ticket ID")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Update")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Name")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Subject")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Status")
                                            </th>

                                            <th>
                                                @Html.DisplayName("Last Replier")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Priority")
                                            </th>
                                        </tr>

                                        @foreach (var item in Model.MyTickets)
                                        {
                                            
                                            <tr>
                                                <td>
                                                    @(nSno++)
                                                </td>
                                                <td>
                                                    
                                                        
                                                        @item.TicketNumber
                                                   
                                                </td>

                                                <td>
                                                    @item.taskData.StatusDate.Value.ToString("dd-MMM-yyyy")
                                                </td>

                                                <td>
                                                    @item.HdTicketOwnerName
                                                </td>
                                                <td>
                                                    @item.taskData.Subject
                                                </td>
                                                <td>
                                                    @if (item.taskData.HDStatusId == 1)
                                                    {
                                                        <span class="label label-warning">@item.taskData.StatusName</span>

                                                    }
                                                    @if (item.taskData.HDStatusId == 2)
                                                    {
                                                        <span class="label label-info">@item.taskData.StatusName</span>

                                                    } @if (item.taskData.HDStatusId == 3)
                                                    {
                                                        <span class="label label-success">@item.taskData.StatusName</span>

                                                    } @if (item.taskData.HDStatusId == 4)
                                                    {
                                                        <span class="label label-danger">@item.taskData.StatusName</span>

                                                    }
                                                </td>

                                                <td>
                                                    @item.taskData.HdTicketStatusOwnerName
                                                </td>
                                                <td>
                                                    @if (item.taskData.PriorityId == 1)
                                                    {
                                                        <meter value=".15" low=".25" title="Low"></meter>

                                                    }
                                                    @if (item.taskData.PriorityId == 2)
                                                    {
                                                        <meter value=".5" low=".25" title="Medium"></meter>

                                                    }
                                                    @if (item.taskData.PriorityId == 3)
                                                    {
                                                        <meter low=".25" optimum=".2" high=".75" value=".8" title="High"></meter>

                                                    }
                                                    @if (item.taskData.PriorityId == 4)
                                                    {
                                                        <meter low=".25" optimum=".2" high=".85" value="1" title="Critical"></meter>
                                                    }
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        }
    }

    if (null != Model.TissuesIssuedToMe)
    {
        if (Model.TissuesIssuedToMe.Count() > 0)
        {
            int nsno = 1;
            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title"> Issued Tickets</h3>
                        </div><!-- /.box-header -->

                        <div class="box-body">
                            <div style="overflow:auto;height:250px;">
                                <table class="table table-hover">
                                    <tbody>
                                        <tr>
                                            <th>
                                               S.No.
                                            </th>
                                            <th>
                                                @Html.DisplayName("Ticket ID")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Update")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Name")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Subject")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Status")
                                            </th>

                                            <th>
                                                @Html.DisplayName("Last Replier")
                                            </th>
                                            <th>
                                                @Html.DisplayName("Priority")
                                            </th>


                                            <th></th>
                                        </tr>

                                        @foreach (var item in Model.TissuesIssuedToMe)
                                        {
                                            <tr>
                                                <td>
                                                    @(nsno++)
                                                </td>
                                                <td>
                                                    @if (item.HDStatusId == 5 || item.HDStatusId == 7)
                                                    {
                                                        @item.TicketNumber
                                                    }
                                                    else
                                                    {
                                                        @Html.ActionLink(@item.TicketNumber, "OpenTicketE", new { TaskId = item.HDTaskId, priorityId = Model.PriorityId, StatusId = Model.HDStatusId })

                                                    }
                                                </td>

                                                <td>
                                                    @item.StatusDate.Value.ToString("dd-MMM-yyyy")
                                                </td>

                                                <td>
                                                    @item.HdTicketOwnerName
                                                </td>
                                                <td>
                                                    @item.Subject
                                                </td>
                                                <td>

                                                    @if (item.HDStatusId == 1)
                                                    {
                                                        <span class="label label-warning">@item.StatusName</span>

                                                    }
                                                    @if (item.HDStatusId == 2)
                                                    {
                                                        <span class="label label-info">@item.StatusName</span>

                                                    } @if (item.HDStatusId == 3)
                                                    {
                                                        <span class="label label-success">@item.StatusName</span>

                                                    } @if (item.HDStatusId == 4)
                                                    {
                                                        <span class="label label-danger">@item.StatusName</span>

                                                    }
                                                   
                                                </td>

                                                <td>
                                                    @item.HdTicketStatusOwnerName
                                                </td>

                                                <td>
                                                    @if (item.PriorityId == 1)
                                                    {
                                                        <meter value=".15" low=".25" title="Low"></meter>

                                                    }
                                                    @if (item.PriorityId == 2)
                                                    {
                                                        <meter value=".5" low=".25" title="Medium"></meter>

                                                    }
                                                    @if (item.PriorityId == 3)
                                                    {
                                                        <meter low=".25" optimum=".2" high=".75" value=".8" title="High"></meter>

                                                    }
                                                    @if (item.PriorityId == 4)
                                                    {
                                                        <meter low=".25" optimum=".2" high=".85" value="1" title="Critical"></meter>
                                                    }
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        }
    }
    if( Model.MyTickets.Count() == 0 &&  Model.TissuesIssuedToMe.Count()  == 0)
    {
        <span style="font-weight:bold;color:red">Data Not Available</span>
    }

    else if (Model.MyTickets.Count() == 0 && Model.TissuesIssuedToMe.Count()> 0)
    {
        <span style="font-weight:bold;color:red">My Tickets Not Available</span>
    }
    else if (Model.MyTickets.Count() == 0 && Model.TissuesIssuedToMe.Count() > 0)
    {
        <span style="font-weight:bold;color:red"> Issued Tickets Not Available</span>
    }
}
else
{
    <span style="font-weight:bold;color:red">Data Not Available</span>
}

