
@model AsteriskBrowserAL.Models.StaffData
@{
    ViewBag.Title = "Subject Assigning";
}

@section BreadCrumb{

    <ul class="breadcrumb">
        <li>
            <i class="menu-icon fa fa-graduation-cap"></i>
            Academics
        </li>
        <li>
            <i class=""></i>
            Timetable
        </li>
        <li class="active">Teacher Assignments</li>
    </ul><!-- /.breadcrumb -->
}


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/select2/3.5.0/select2.min.css" />

<!-- CSS to make Select2 fit in with Bootstrap 3.x -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/select2/3.5.0/select2-bootstrap.min.css" />

<!-- Include Select2 JS -->
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/3.5.0/select2.min.js"></script>


<link href="~/assets/css/jquery-ui.custom.min.css" rel="stylesheet" />
<script src="~/assets/js/jquery-ui.min.js"></script>

<style>
    .ui-autocomplete {
        font-size: 12px;
        cursor: pointer;
        width: 120px;
        height: 120px;
        overflow-y: scroll;
    }

    .required:first-letter {
        color: red;
        font-weight: bold;
    }

    .select2-container--default .select2-selection--multiple .select2-selection__rendered {
        box-sizing: border-box;
        list-style: none;
        margin: 0;
        padding: 0 5px;
        width: 100%;
    }

    .select2-container .select2-selection--multiple .select2-selection__rendered {
        display: inline-block;
        overflow: hidden;
        padding-left: 8px;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
</style>


<section class="content">
 

    <div class="row">
        <div class="col-xs-12">

            @using (Html.BeginForm("Teacher_SubjectAssociation", "ATimetable", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)

                <div class="table-header">
                    <span style="font-family:calibri;">Teacher Assignments</span>


                </div>
            <div class="widget-box">
          
                <div class="widget-body">
                    <div class="widget-main">
                     
                            <!-- form start -->

                          

                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="col-sm-6">
                                            <label class="col-xs-4">Staff</label>
                                     
                                            <div class="col-sm-6">
                                                <input id="StaffId" class="form-control" name="Staff" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            



                            </div>
                        </div>

                       

                      
                    </div>

            <div id="Data"></div>
            }
                    </div>
                </div>
  
            
</section>



<script type="text/javascript">

    var StaffId = "";

    $("#StudentId").keyup(function (e) {
        var keycode = e.keyCode;
        if (keycode == 8 || keycode == 46) {
            ResetControls();
        };
    });


    function ResetControls() {

        $('#StaffId').val('');

        $('#Data').html("");
    }



    $("#StaffId").autocomplete(
     {
         source: function (request, response) {

             if (request.term.length < 3) {
                 return;
             }

             $('#imagemodal').show();
             $.ajax({
                 url: "/ATimetable/GetStaffForSubAssigning",
                 data: { Name: request.term },
                 success: function (json) {
                     response($.map(json, function (data, id) {
                         return {
                             label: data.FirstName + " " + data.LastName,
                             value: data.FirstName + " " + data.LastName,
                             id: data.StaffId,
                         };
                     }));

                     $('#imagemodal').hide();
                 }
             });
         },
         minLength: 3,
         select: function SelectEvent(event, ui) {
             StaffId = ui.item.id;

             GetClassesAndSubjectsByStaffId();
         }
     });

    function GetClassesAndSubjectsByStaffId() {



        $.ajax({

            url: '/Atimetable/GetClassesAndSubjectsByStaffId',
            data: { StaffId: StaffId },
            success: function (Data) {

                $('#Data').html(Data);
            },
            async: false
        });
    }


</script>






