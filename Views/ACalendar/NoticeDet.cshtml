@model AsteriskBrowserAL.Notices

<br />
<br />
<div class="page-header">
    <h1>
        <small style="float:right;">
            @if (@ViewBag.Status == 0)
            {    @Html.ActionLink("Back to details", "Notice")
            }
            @if (@ViewBag.Status == 1) { 
            <a href="/Dashboard/Index/"> Back to details</a>
            }
        </small>
    </h1>
</div>

<table style="width:100%;border-collapse:collapse;margin-top:3em;font-family:'Segoe UI'" border="1">
    <tr style="width:100%">
        <td style="width:100%">
            <div class="table-header">
                <b>Notice Details</b>
                <button id="Generate" class="btn btn-info btn-xs" style="float:right">
                    <i class="ace-icon fa fa-print bigger-180"></i>
                </button>
            </div>
            <input type="hidden" value="@Model.NoticeId" id="NoticeId" name="NoticeId" />
            <table style="width:100%;margin-left:3em;margin-top:3em;margin-bottom:3em; border-collapse:collapse" align="center">
                <tr>
                    <td>
						<table style="width:60%">								
							<tr>
								<td style="margin-right:2em;width:25%">
									<b>Notice Start Date</b>
								</td>
								<td style="margin-right:0em;width:10%">
									<b> : </b>
								</td>
								<td style="margin-right:0em">

									@Model.NoticeDate.Value.ToShortDateString()
								</td>
							</tr>
							<tr>
								<td style="margin-right:2em;width:25%">
									<b>Notice End Date</b>
								</td>
								<td style="margin-right:0em;width:10%">
									<b> : </b>
								</td>
								<td style="margin-right:0em">

									@Model.NoticeEndDate.Value.ToShortDateString()
								</td>
							</tr>							
							<tr>
								<td style="margin-right:2em;width:25%">
									<b>Description</b>
								</td>
								<td style="margin-right:0em;width:10%">
									<b> : </b>
								</td>
								<td style="margin-right:0em">
									@Html.Raw(Model.Discription)
								</td>
							</tr>
							
						</table>
                    </td>
                </tr>
            </table>           
        </td>
    </tr>
</table>



<script>
    $('#downloadbtn').click(function () {
        var filename = $('#attachmentFile').val()
        window.location.href = "/Common/DownloadFile?file=" + filename;
    })
    $('#Generate').click(function () {
        debugger
        var NoticeId = $('#NoticeId').val()
        $('#imagemodal').show();
        $.ajax({
            url: '/ACalendar/NoticePrint',
            data: { id: NoticeId },
            success: function (data) {
                $('#table').html(data);
                PrintData(data);
            }
        }).done(function (data) {
            $('#imagemodal').hide();
        });
    })
    function PrintElem(elem) {
        debugger
        Popup($(elem).html());
    }
    function PrintData(data) {
        debugger
        var mywindow = window.open('', 'my div', 'height=300,width=600');
        mywindow.document.write('<p></p>');
        mywindow.document.write(data);
        mywindow.document.write('<p></p>');

        mywindow.document.close();
        mywindow.focus();

        mywindow.print();
        mywindow.close();
        return true;
    }

</script>
