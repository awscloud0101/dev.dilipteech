@model AsteriskBrowserAL.Models.CautionDepositDataModel
@{
    ViewBag.Title = "Caution Deposit For Reprint";
    int nSno = 1;
}

@if (null != Model && Model.lstCDData.Count() > 0)
{
   
        <p id="ID" style="display:none">
            <span style="color:red">Please select record to print</span>
        </p>
        
            <div class="table-header">
               Caution Deposit Re-Print
                <input class="btn btn-primary" style="width:80px" type="button" value="Print " onclick="PrintElem('#mydiv')" />
            </div><!-- /.box-header -->
            <table class="table tbhover table-striped table-bordered dynamic-table">

                <tr>
                    <th>
                        @Html.DisplayName("SNo")
                    </th>
                    <th>
                        @Html.DisplayName("Receipt")
                    </th>
                    <th>
                        @Html.DisplayName("Date")
                    </th>
                    <th>
                        @Html.DisplayName("Student")
                    </th>
                    <th>
                        @Html.DisplayName("Amount")
                    </th>
                </tr>
                @for (int i = 0; i < Model.lstCDData.Count(); i++)
                {
                    <tr>
                        <td>
                            @(nSno++)
                        </td>
                        <td>
                            @Model.lstCDData.ElementAt(i).DisplayReceiptNo
                        </td>
                        <td>
                            @if (Model.lstCDData.ElementAt(i).FirstInserted.HasValue)
                            {
                                @Model.lstCDData.ElementAt(i).FirstInserted.Value.ToString("dd - MMM - yyyy")
                            }
                        </td>
                        <td>
                            @Model.lstCDData.ElementAt(i).StudentName
                        </td>
                        <td>
                            @Model.lstCDData.ElementAt(i).Amount
                        </td>
                        <td>
                            @if (Model.CautionDepositId > 0)
                            {
                                if (Model.CautionDepositId == Model.lstCDData.ElementAt(i).CautionDepositId)
                                {
                                    <input type="radio" name="CautionDepositId" value="@Model.lstCDData.ElementAt(i).CautionDepositId" checked="checked" />
                                }
                                else
                                {
                                    <input type="radio" name="CautionDepositId" value="@Model.lstCDData.ElementAt(i).CautionDepositId" />
                                }
                            }
                            else
                            {
                                <input type="radio" name="CautionDepositId" value="@Model.lstCDData.ElementAt(i).CautionDepositId" />
                            }
                        </td>
                    </tr>
                }
            </table>

       
   
}
else
{
    <div class="col-xs-12">
        <span style="font-weight:bold;color:red">Data not available to display</span>
    </div>
}

    <script type="text/javascript">

        $('input[name="CautionDepositId"]').click(function radioButton() {
            document.getElementById("ID").style.display = "none";
            var CautionDepositId = $(this).val();
            localStorage.setItem('CDId', CautionDepositId);
            GetReprintData();
        });

        function PrintElem(elem) {
            var CautionDepositId = localStorage.getItem('CDId');
            if (CautionDepositId == "" || CautionDepositId == null) {
                document.getElementById("ID").style.display = "inline";
            }
            else {
                Popup($(elem).html());
            }

        }

        function Popup(data) {
            var mywindow = window.open('', 'my div', 'height=300,width=600');
            mywindow.document.write('<p></p>');
            mywindow.document.write(data);
            mywindow.document.write('<p></p>');

            mywindow.document.close();
            mywindow.focus();

            mywindow.print();
            mywindow.close();
            return true;
        }
    </script>


    <body>
        <div id="mydiv" style="display:none">
            @if (Model.CautionDepositId > 0)
            {

                    <div class="row">
                        <div class="col-xs-12">
                            <img class=" col-xs-11" id="avatar" width="50" height="43" src="@ViewBag.ImageData" style="margin-bottom:-1.5em;" />
                            <b style="font-weight:bold; margin-left:0.3em; font-size:20px; font-family:'Segoe UI'">@ViewBag.InstituteName</b>
                        </div>
                        <div style="margin-left:3.7em; font-family:'Segoe UI'"><b>@ViewBag.InstituteAddres</b></div>
                        <br />

                        <hr style="width:100%;" />
                        <table>
                            <tr>
                                <td style="width:510px; font-family:'Segoe UI'">
                                    <b>Caution Deposit Receipt</b>
                                </td>
                                <td style="font-family:'Segoe UI'">
                                    Date: @Model.Date.Value.ToString("dd-MMM-yyyy")
                                </td>
                            </tr>
                        </table>
                        <hr style="width:100%;" />
                        <table style="margin-top:-0.2em; margin-bottom:-0.2em; font-family:'Segoe UI'">
                            <tr>
                                <td style="width:200px;">
                                    Receipt No: @Model.DisplayReceiptNo
                                </td>
                                <td>
                                    <div align="center" style="font:10%;">@Model.StudentName</div>
                                </td>
                            </tr>

                        </table>
                        <table style="margin-top:-0.2em; margin-bottom:-0.2em; font-family:'Segoe UI'">
                            <tr>
                                <td style="width:200px;">
                                 
                                </td>
                                <td>
                                    <div align="center" style="font:10%;">@Model.ParentName</div>
                                </td>
                            </tr>

                        </table>
                        <hr style="width:100%;" />

                        <div class="col-xs-12 box-body table-responsive">
                            <table class="table table-hover" rules="rows" cellpadding="5" style="width:675px; font-size:12px; margin-top:-1em">
                                <tbody>
                                    <tr style="font-size:13px; font-family:'Segoe UI'; font-weight:bold; text-align:left;">
                                        <th>
                                            SNo
                                        </th>
                                        <th>
                                            @Html.DisplayName("Particular")
                                        </th>
                                        <th>
                                            @Html.DisplayName("Amount Paid")
                                        </th>
                                    </tr>

                                    <tr style="font-family:'Segoe UI';">
                                        <td>
                                            1
                                        </td>
                                        <td>
                                           Caution Deposit
                                        </td>
                                        <td>
                                           @Model.Amount
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                            <hr style="width:100%; margin-top:-0.2em" />
                            <br />
                            <div style="font-family:'Segoe UI'">
                                Total Amount Paid : @Model.Amount
                            </div>
                            <div>
                                <span style="font-style:italic; font-family:'Segoe UI'">(@Model.AmountInWords)</span>
                            </div>
                            <br />
                            <br />
                            <p>
                                <span style="float:right; font-family:'Segoe UI'"><b>For @ViewBag.InstituteName</b></span>
                            </p>
                            <hr style="width:100%;" />
                            <table style="font-family:'Segoe UI'">
                                <tr>
                                    <td style="width:480px; font-style:italic;">
                                        (Parent's Copy)
                                    </td>
                                    <td>
                                        System Generated Receipt
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <br />
                    <br />
                    <br />


                    <div class="row">
                        <div class="col-xs-12">
                            <img class=" col-xs-11" id="avatar" width="50" height="43" src="@ViewBag.ImageData" style="margin-bottom:-1.5em;" />
                            <b style="font-weight:bold; margin-left:0.3em; font-size:20px; font-family:'Segoe UI'">@ViewBag.InstituteName</b>
                        </div>
                        <div style="margin-left:3.7em; font-family:'Segoe UI'"><b>@ViewBag.InstituteAddres</b></div>
                        <br />

                        <hr style="width:100%;" />
                        <table style="font-family:'Segoe UI'">
                            <tr>
                                <td style="width:510px;">
                                    <b>Caution Deposit Receipt</b>
                                </td>
                                <td>
                                    Date: @Model.Date.Value.ToString("dd-MMM-yyyy")
                                </td>
                            </tr>
                        </table>
                        <hr style="width:100%;" />
                        <table style="margin-top:-0.2em; margin-bottom:-0.2em; font-family:'segoe ui'">
                            <tr>
                                <td style="width:200px;">
                                    Receipt No: @Model.DisplayReceiptNo
                                </td>
                                <td>
                                    <div align="center" style="font:10%;">@Model.StudentName</div>
                                </td>
                            </tr>

                        </table>
                        <table style="margin-top:-0.2em; margin-bottom:-0.2em; font-family:'Segoe UI'">
                            <tr>
                                <td style="width:200px;"></td>
                                <td>
                                    <div align="center" style="font:10%;">@Model.ParentName</div>
                                </td>
                            </tr>

                        </table>
                        <hr style="width:100%;" />

                        <div class="col-xs-12 box-body table-responsive">
                            <table class="table table-hover" rules="rows" cellpadding="5" style="width:675px; font-size:12px; margin-top:-1em">
                                <tbody>
                                    <tr style="font-size:13px; font-family:'Segoe UI'; font-weight:bold; text-align:left;">
                                        <th>
                                            SNo
                                        </th>
                                        <th>
                                            @Html.DisplayName("Particular")
                                        </th>
                                        <th>
                                            @Html.DisplayName("Amount Paid")
                                        </th>
                                      
                                    </tr>

                                    <tr style="font-family:'Segoe UI';">
                                        <td>
                                            1
                                        </td>
                                        <td>
                                           Caution Deposit
                                        </td>
                                        <td>
                                            @Model.Amount
                                        </td>
                                      
                                    </tr>

                                </tbody>
                            </table>
                            <hr style="width:100%; margin-top:-0.2em" />
                            <br />
                            <div style="font-family:'Segoe UI'">
                                Total Amount Paid :@Model.Amount
                            </div>
                            <div>
                                <span style="font-style:italic; font-family:'Segoe UI'">(@Model.AmountInWords)</span>
                            </div>
                            <br />
                            <br />
                            <p>
                                <span style="float:right;font-family:'Segoe UI'"><b>For @ViewBag.InstituteName</b></span>
                            </p>
                            <hr style="width:100%;" />
                            <table style="font-family:'Segoe UI'">
                                <tr>
                                    <td style="width:480px; font-style:italic;">
                                        (Office Copy)
                                    </td>
                                    <td>
                                        System Generated Receipt
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

            }
        </div>
    </body>







