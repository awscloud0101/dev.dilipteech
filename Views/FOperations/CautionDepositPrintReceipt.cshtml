@model AsteriskBrowserAL.Models.CautionDepositDataModel
@{
    ViewBag.Title = "Caution Deposit Print receipt";
    int nSnum = 1;
}

<!-- #section:basics/content.breadcrumbs -->
<section class="content-header">
    <ol class="breadcrumb">
        <li>
            <i class="menu-icon fa fa-list"></i>
            Transactions
        </li>
        <li>
            <i class=""></i>
            Finance
        </li>
        <li class="active">Caution Deposit Print receipt</li>
    </ol>
    <!-- /section:basics/content.breadcrumbs -->
</section>


<section class="content">
    <div class="row">
        <div class=col-xs-12>
            <h3>@Html.ActionLink("<< Caution Deposit Details", "CautionDeposit")</h3>
        </div>
    </div>
    <br />

    <div class="row">
        <div class=col-xs-12>
            @using (Html.BeginForm("CautionDepositPrintReceipt", "TFinance", FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)
                <span style="color: red;">@Html.ValidationMessage("CautionDepositPrintReceipt")</span>

                <div class="widget-box">
                    <div class="widget-header widget-header-small widget-header-flat">
                        <h3 class="box-title">Search Payment Details</h3>
                    </div><!-- /.box-header -->
                        
                    <div class="widget-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label no-padding-right">@Html.Label("Receipt")</label>
                                    <div class="col-sm-3">
                                        <input type="number" class="form-control" id="Receipt" />
                                    </div>

                                    <label class="col-sm-3 control-label no-padding-right">@Html.Label("Student Name")</label>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control" id="Student" />
                                    </div>

                                </div>
                            </div>
                        </div>

                        <br />
                        <div class="row">
                            <div class="col-sm-12">

                                <label class="col-sm-3 control-label no-padding-right" for="form-field-1">Select Date Range</label>
                                <div class="col-sm-4">
                                    <div class="input-group">
                                        <input type="text" class="form-control pull-right" id="daterange" name="daterange" autocomplete="on"/>
                                        <div class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                    </div>
                </div>

                <br />

    <div id="Data" style="display:none">
        <div id="SearchData" class="row">
        </div>

    </div>
             
            }
        </div>
    </div>

</section>

<script type="text/javascript">
    $('#daterange').daterangepicker();


    $('#daterange-btn').daterangepicker(
                {
                    ranges: {
                        'Today': [moment(), moment()],
                        'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                        'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                        'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                        'This Month': [moment().startOf('month'), moment().endOf('month')],
                        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                    },
                    startDate: moment().subtract(29, 'days'),
                    endDate: moment()
                },
        function (start, end) {
            $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
        }
        );
</script>



<script>
    $("#Receipt").autocomplete({
        source: function (request, response) {
            document.getElementById("Student").value = "";
            document.getElementById("daterange").value = "";
            localStorage.setItem('CDId', "");
            $.ajax({
                url: "/FOperations/GetCautionDepositDataForReprint",
                data: { ReceiptNo: request.term },

                success: function (Data) {
                    document.getElementById('Data').style.display = "inline";
                    $('#SearchData').html(Data);
                },
            });
        },
        minLength: 1,
    });

    $("#Student").autocomplete({
        source: function (request, response) {
            document.getElementById("Receipt").value = "";
            document.getElementById("daterange").value = "";
            localStorage.setItem('CDId', "");
            $.ajax({
                url: "/FOperations/GetCautionDepositDataForReprint",
                data: { StudentName: request.term },

                success: function (Data) {
                    document.getElementById('Data').style.display = "inline";
                    $('#SearchData').html(Data);
                },
            });
        },
        minLength: 1,
    });

    $("#daterange").autocomplete({
        source: function (request, response) {
            document.getElementById("Receipt").value = "";
            document.getElementById("Student").value = "";
            localStorage.setItem('CDId', "");
            $.ajax({
                url: "/FOperations/GetCautionDepositDataForReprint",
                data: { DateRange: request.term },

                success: function (Data) {
                    document.getElementById('Data').style.display = "inline";
                    $('#SearchData').html(Data);
                },
            });
        },
        minLength: 22,
    });

    function DataByDate() {
        document.getElementById("Receipt").value = "";
        document.getElementById("Student").value = "";
        GetReprintData();
    };

    function GetReprintData() {
        var CautionDepositId = localStorage.getItem('CDId');
        var ReceiptNo = document.getElementById("Receipt").value;
        var StudentName = document.getElementById("Student").value;
        var DateRange = document.getElementById("daterange").value;

        $.ajax({
            url: "/FOperations/GetCautionDepositDataForReprint",
            data: { ReceiptNo: ReceiptNo, StudentName: StudentName, DateRange: DateRange, CautionDepositId: CautionDepositId },

            success: function (Data) {
                document.getElementById('Data').style.display = "inline";
                $('#SearchData').html(Data);
            },
        });
    }

</script>








